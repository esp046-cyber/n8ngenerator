<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>n8n Workflow Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 8px;
        }

        .container {
            max-width: 100%;
            width: 100%;
            margin: 0 auto;
        }

        .tutorial {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .tutorial h2 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 12px;
        }

        .tutorial-step {
            background: #f8f9fa;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .tutorial-step h3 {
            color: #333;
            font-size: 1rem;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .tutorial-step p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }

        .toggle-tutorial {
            background: #764ba2;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-bottom: 12px;
        }

        .toggle-tutorial:active {
            opacity: 0.8;
        }

        .tutorial.hidden {
            display: none;
        }

        .header {
            text-align: center;
            color: white;
            padding: 12px 8px;
            margin-bottom: 12px;
        }

        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 6px;
            line-height: 1.2;
        }

        .header p {
            font-size: 0.85rem;
            opacity: 0.95;
        }

        .panel {
            background: white;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 100%;
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .form-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            color: #333;
            font-weight: 600;
            font-size: 0.9rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            -webkit-appearance: none;
            appearance: none;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        select {
            background: white;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
            padding-right: 32px;
        }

        textarea {
            resize: vertical;
            min-height: 70px;
            font-family: 'Courier New', monospace;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-bottom: 8px;
            -webkit-tap-highlight-color: transparent;
        }

        .btn:active {
            opacity: 0.8;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
            width: auto;
            background: #dc3545;
        }

        .nodes-list h3 {
            margin: 12px 0 8px 0;
            color: #333;
            font-size: 1rem;
        }

        .node-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .node-info {
            flex: 1;
            min-width: 0;
        }

        .node-name {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 3px;
            font-size: 0.9rem;
            word-wrap: break-word;
        }

        .node-type {
            font-size: 0.8rem;
            color: #666;
        }

        .output-section {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            margin-top: 12px;
        }

        .output-section h3 {
            color: #333;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
            max-height: 250px;
            overflow-y: auto;
            font-size: 11px;
            line-height: 1.4;
            -webkit-overflow-scrolling: touch;
        }

        @media (min-width: 600px) {
            body {
                padding: 16px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .header p {
                font-size: 1rem;
            }

            .panel {
                padding: 20px;
            }

            .panel h2 {
                font-size: 1.3rem;
            }

            pre {
                max-height: 350px;
                font-size: 13px;
            }
        }

        @media (min-width: 900px) {
            .container {
                max-width: 1200px;
            }

            .main-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 16px;
            }

            .panel {
                margin-bottom: 0;
            }

            .header h1 {
                font-size: 2.5rem;
            }

            pre {
                max-height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ n8n Workflow Generator</h1>
            <p>Create automated workflows visually</p>
        </div>

        <button class="toggle-tutorial" onclick="toggleTutorial()">ðŸ“š Show/Hide Tutorial</button>

        <div class="tutorial" id="tutorial">
            <h2>ðŸŽ“ Beginner's Tutorial</h2>
            
            <div class="tutorial-step">
                <h3><span class="step-number">1</span> What is n8n?</h3>
                <p>n8n is a workflow automation tool that connects different apps and services together. This generator helps you create n8n workflow configurations easily!</p>
            </div>

            <div class="tutorial-step">
                <h3><span class="step-number">2</span> Choose Node Type</h3>
                <p><strong>Trigger:</strong> Starts your workflow (e.g., when you receive an email)<br>
                <strong>Action:</strong> Does something (e.g., send a Slack message)<br>
                <strong>Condition:</strong> Makes decisions (e.g., if value > 100)<br>
                <strong>Transform:</strong> Changes data (e.g., convert format)</p>
            </div>

            <div class="tutorial-step">
                <h3><span class="step-number">3</span> Select Node Name & Service</h3>
                <p>Pick from the dropdown what you want to do. For example, choose "HTTP Request" for the name and "HTTP" for the service to make API calls.</p>
            </div>

            <div class="tutorial-step">
                <h3><span class="step-number">4</span> Use Parameter Templates</h3>
                <p>Select a template from the dropdown to auto-fill common configurations. You can edit the JSON directly or just use the template as-is!</p>
            </div>

            <div class="tutorial-step">
                <h3><span class="step-number">5</span> Add Nodes to Workflow</h3>
                <p>Click "Add Node to Workflow" button. Repeat steps 2-4 to add more nodes. They'll automatically connect in sequence!</p>
            </div>

            <div class="tutorial-step">
                <h3><span class="step-number">6</span> Generate & Export</h3>
                <p>Fill in your workflow name and description, then click "Generate n8n JSON". Copy the output and import it into your n8n instance!</p>
            </div>

            <div class="tutorial-step">
                <h3><span class="step-number">7</span> Example Workflow</h3>
                <p><strong>Try this:</strong> Add a "Webhook" trigger â†’ Add an "HTTP Request" action â†’ Add a "Slack" action. This creates a workflow that receives data via webhook, calls an API, and posts to Slack!</p>
            </div>
        </div>

        <div class="main-content">
            <div class="panel">
                <h2>Add Workflow Node</h2>
                
                <div class="form-group">
                    <label>Node Type</label>
                    <select id="nodeType">
                        <option value="trigger">Trigger</option>
                        <option value="action">Action</option>
                        <option value="condition">Condition</option>
                        <option value="transform">Transform</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Node Name</label>
                    <select id="nodeName">
                        <option value="">Select or enter custom...</option>
                        <option value="Webhook">Webhook</option>
                        <option value="HTTP Request">HTTP Request</option>
                        <option value="Schedule Trigger">Schedule Trigger</option>
                        <option value="Email Trigger">Email Trigger</option>
                        <option value="Filter">Filter</option>
                        <option value="Set">Set</option>
                        <option value="IF">IF</option>
                        <option value="Switch">Switch</option>
                        <option value="Code">Code</option>
                        <option value="Function">Function</option>
                        <option value="Merge">Merge</option>
                        <option value="Split In Batches">Split In Batches</option>
                        <option value="Wait">Wait</option>
                        <option value="Execute Command">Execute Command</option>
                        <option value="Read/Write Files">Read/Write Files</option>
                        <option value="Move Binary Data">Move Binary Data</option>
                        <option value="Compress">Compress</option>
                        <option value="Crypto">Crypto</option>
                        <option value="DateTime">DateTime</option>
                        <option value="HTML Extract">HTML Extract</option>
                        <option value="RSS Read">RSS Read</option>
                        <option value="XML">XML</option>
                        <option value="Spreadsheet File">Spreadsheet File</option>
                        <option value="Remove Duplicates">Remove Duplicates</option>
                        <option value="Limit">Limit</option>
                        <option value="Sort">Sort</option>
                        <option value="Aggregate">Aggregate</option>
                        <option value="Compare Datasets">Compare Datasets</option>
                        <option value="Item Lists">Item Lists</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Service/Integration</label>
                    <select id="nodeService">
                        <option value="">Select service...</option>
                        <option value="Webhook">Webhook</option>
                        <option value="HTTP">HTTP</option>
                        <option value="Cron">Cron</option>
                        <option value="Gmail">Gmail</option>
                        <option value="Outlook">Outlook</option>
                        <option value="Slack">Slack</option>
                        <option value="Discord">Discord</option>
                        <option value="Telegram">Telegram</option>
                        <option value="WhatsApp">WhatsApp</option>
                        <option value="MicrosoftTeams">Microsoft Teams</option>
                        <option value="GoogleSheets">Google Sheets</option>
                        <option value="MicrosoftExcel">Microsoft Excel</option>
                        <option value="Airtable">Airtable</option>
                        <option value="MySQL">MySQL</option>
                        <option value="PostgreSQL">PostgreSQL</option>
                        <option value="MongoDB">MongoDB</option>
                        <option value="Redis">Redis</option>
                        <option value="SQLite">SQLite</option>
                        <option value="Elasticsearch">Elasticsearch</option>
                        <option value="AWS">AWS</option>
                        <option value="AWSLambda">AWS Lambda</option>
                        <option value="AWSS3">AWS S3</option>
                        <option value="AWSSNS">AWS SNS</option>
                        <option value="AWSSQS">AWS SQS</option>
                        <option value="AzureBlob">Azure Blob</option>
                        <option value="GoogleCloud">Google Cloud</option>
                        <option value="GoogleCloudStorage">Google Cloud Storage</option>
                        <option value="GitHub">GitHub</option>
                        <option value="GitLab">GitLab</option>
                        <option value="Bitbucket">Bitbucket</option>
                        <option value="Notion">Notion</option>
                        <option value="Trello">Trello</option>
                        <option value="Asana">Asana</option>
                        <option value="ClickUp">ClickUp</option>
                        <option value="Monday">Monday.com</option>
                        <option value="Jira">Jira</option>
                        <option value="Confluence">Confluence</option>
                        <option value="Linear">Linear</option>
                        <option value="Stripe">Stripe</option>
                        <option value="PayPal">PayPal</option>
                        <option value="Square">Square</option>
                        <option value="Twilio">Twilio</option>
                        <option value="SendGrid">SendGrid</option>
                        <option value="Mailchimp">Mailchimp</option>
                        <option value="MailerLite">MailerLite</option>
                        <option value="Brevo">Brevo</option>
                        <option value="HubSpot">HubSpot</option>
                        <option value="Salesforce">Salesforce</option>
                        <option value="Pipedrive">Pipedrive</option>
                        <option value="Zoho">Zoho CRM</option>
                        <option value="ActiveCampaign">ActiveCampaign</option>
                        <option value="Zendesk">Zendesk</option>
                        <option value="Intercom">Intercom</option>
                        <option value="Freshdesk">Freshdesk</option>
                        <option value="Shopify">Shopify</option>
                        <option value="WooCommerce">WooCommerce</option>
                        <option value="BigCommerce">BigCommerce</option>
                        <option value="Magento">Magento</option>
                        <option value="WordPress">WordPress</option>
                        <option value="Webflow">Webflow</option>
                        <option value="Twitter">Twitter</option>
                        <option value="Facebook">Facebook</option>
                        <option value="Instagram">Instagram</option>
                        <option value="LinkedIn">LinkedIn</option>
                        <option value="YouTube">YouTube</option>
                        <option value="TikTok">TikTok</option>
                        <option value="Reddit">Reddit</option>
                        <option value="Dropbox">Dropbox</option>
                        <option value="GoogleDrive">Google Drive</option>
                        <option value="OneDrive">OneDrive</option>
                        <option value="Box">Box</option>
                        <option value="FTP">FTP</option>
                        <option value="OpenAI">OpenAI</option>
                        <option value="Anthropic">Anthropic Claude</option>
                        <option value="GooglePalm">Google PaLM</option>
                        <option value="Pinecone">Pinecone</option>
                        <option value="Supabase">Supabase</option>
                        <option value="Firebase">Firebase</option>
                        <option value="Vercel">Vercel</option>
                        <option value="Netlify">Netlify</option>
                        <option value="Docker">Docker</option>
                        <option value="Kubernetes">Kubernetes</option>
                        <option value="Jenkins">Jenkins</option>
                        <option value="CircleCI">CircleCI</option>
                        <option value="TravisCI">Travis CI</option>
                        <option value="Datadog">Datadog</option>
                        <option value="NewRelic">New Relic</option>
                        <option value="Sentry">Sentry</option>
                        <option value="PagerDuty">PagerDuty</option>
                        <option value="Grafana">Grafana</option>
                        <option value="Prometheus">Prometheus</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Parameters Template</label>
                    <select id="paramTemplate" onchange="loadParamTemplate()">
                        <option value="custom">Custom JSON</option>
                        <option value="webhook">Webhook</option>
                        <option value="http-get">HTTP GET Request</option>
                        <option value="http-post">HTTP POST Request</option>
                        <option value="http-put">HTTP PUT Request</option>
                        <option value="http-delete">HTTP DELETE Request</option>
                        <option value="schedule">Schedule/Cron</option>
                        <option value="email">Email</option>
                        <option value="slack">Slack Message</option>
                        <option value="discord">Discord Message</option>
                        <option value="telegram">Telegram Message</option>
                        <option value="teams">Microsoft Teams</option>
                        <option value="google-sheets">Google Sheets Append</option>
                        <option value="google-sheets-read">Google Sheets Read</option>
                        <option value="google-sheets-update">Google Sheets Update</option>
                        <option value="mysql">MySQL Query</option>
                        <option value="postgresql">PostgreSQL Query</option>
                        <option value="mongodb">MongoDB Insert</option>
                        <option value="redis">Redis Set</option>
                        <option value="filter">Filter</option>
                        <option value="set">Set Variables</option>
                        <option value="if">IF Condition</option>
                        <option value="switch">Switch</option>
                        <option value="code">Code/Function</option>
                        <option value="wait">Wait</option>
                        <option value="merge">Merge</option>
                        <option value="split">Split In Batches</option>
                        <option value="aws-s3-upload">AWS S3 Upload</option>
                        <option value="aws-lambda">AWS Lambda</option>
                        <option value="github-create-issue">GitHub Create Issue</option>
                        <option value="stripe-payment">Stripe Create Payment</option>
                        <option value="openai">OpenAI Chat</option>
                        <option value="google-drive-upload">Google Drive Upload</option>
                        <option value="notion-create">Notion Create Page</option>
                        <option value="airtable-create">Airtable Create Record</option>
                        <option value="hubspot-contact">HubSpot Create Contact</option>
                        <option value="shopify-order">Shopify Get Orders</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Parameters (JSON)</label>
                    <textarea id="nodeParams" placeholder='{"url": "https://api.example.com"}'>{}</textarea>
                    <button class="btn btn-secondary" onclick="copyParams()" style="margin-top: 8px; padding: 8px;">Copy Parameters</button>
                </div>

                <button class="btn" onclick="addNode()">Add Node to Workflow</button>

                <div class="nodes-list">
                    <h3>Workflow Nodes</h3>
                    <div id="nodesContainer"></div>
                </div>
            </div>

            <div class="panel">
                <h2>Workflow Configuration</h2>
                
                <div class="form-group">
                    <label>Workflow Name</label>
                    <input type="text" id="workflowName" value="My Workflow">
                </div>

                <div class="form-group">
                    <label>Workflow Description</label>
                    <textarea id="workflowDesc" placeholder="Describe what this workflow does"></textarea>
                </div>

                <button class="btn" onclick="generateWorkflow()">Generate n8n JSON</button>
                <button class="btn btn-secondary" onclick="clearWorkflow()">Clear All</button>

                <div class="output-section">
                    <h3>Generated Workflow JSON</h3>
                    <pre id="output">Add nodes and click "Generate n8n JSON" to see the workflow configuration.</pre>
                </div>

                <button class="btn" onclick="copyToClipboard()">Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <script>
        let nodes = [];
        let nodeCounter = 0;

        const paramTemplates = {
            'custom': '{}',
            'webhook': '{\n  "path": "webhook",\n  "method": "POST",\n  "responseMode": "onReceived"\n}',
            'http-get': '{\n  "url": "https://api.example.com/data",\n  "method": "GET",\n  "responseFormat": "json"\n}',
            'http-post': '{\n  "url": "https://api.example.com/data",\n  "method": "POST",\n  "jsonParameters": true,\n  "body": {\n    "key": "value"\n  }\n}',
            'http-put': '{\n  "url": "https://api.example.com/data/123",\n  "method": "PUT",\n  "jsonParameters": true,\n  "body": {\n    "key": "updated_value"\n  }\n}',
            'http-delete': '{\n  "url": "https://api.example.com/data/123",\n  "method": "DELETE"\n}',
            'schedule': '{\n  "rule": {\n    "interval": [\n      {\n        "field": "hours",\n        "hoursInterval": 1\n      }\n    ]\n  }\n}',
            'email': '{\n  "to": "recipient@example.com",\n  "subject": "Email Subject",\n  "text": "Email body text"\n}',
            'slack': '{\n  "channel": "#general",\n  "text": "Hello from n8n!",\n  "attachments": []\n}',
            'discord': '{\n  "webhookUrl": "https://discord.com/api/webhooks/...",\n  "text": "Hello from n8n!"\n}',
            'telegram': '{\n  "chatId": "123456789",\n  "text": "Hello from n8n!"\n}',
            'teams': '{\n  "webhookUrl": "https://outlook.office.com/webhook/...",\n  "messageType": "text",\n  "messageText": "Hello from n8n!"\n}',
            'google-sheets': '{\n  "operation": "append",\n  "sheetId": "your-sheet-id",\n  "range": "Sheet1!A:Z"\n}',
            'google-sheets-read': '{\n  "operation": "read",\n  "sheetId": "your-sheet-id",\n  "range": "Sheet1!A:Z"\n}',
            'google-sheets-update': '{\n  "operation": "update",\n  "sheetId": "your-sheet-id",\n  "range": "Sheet1!A1",\n  "values": [["New Value"]]\n}',
            'mysql': '{\n  "operation": "executeQuery",\n  "query": "SELECT * FROM users WHERE id = ?",\n  "queryParameters": "1"\n}',
            'postgresql': '{\n  "operation": "executeQuery",\n  "query": "SELECT * FROM users WHERE status = $1",\n  "queryParameters": "active"\n}',
            'mongodb': '{\n  "operation": "insert",\n  "collection": "users",\n  "fields": "{\\"name\\": \\"John\\", \\"email\\": \\"john@example.com\\"}"\n}',
            'redis': '{\n  "operation": "set",\n  "key": "mykey",\n  "value": "myvalue",\n  "expire": true,\n  "ttl": 3600\n}',
            'filter': '{\n  "conditions": {\n    "string": [\n      {\n        "value1": "={{$json[\\"status\\"]}}",\n        "operation": "equals",\n        "value2": "active"\n      }\n    ]\n  }\n}',
            'set': '{\n  "values": {\n    "string": [\n      {\n        "name": "output",\n        "value": "={{$json[\\"input\\"]}}" \n      }\n    ]\n  }\n}',
            'if': '{\n  "conditions": {\n    "string": [\n      {\n        "value1": "={{$json[\\"value\\"]}}",\n        "operation": "larger",\n        "value2": "100"\n      }\n    ]\n  }\n}',
            'switch': '{\n  "mode": "rules",\n  "rules": {\n    "rules": [\n      {\n        "conditions": {\n          "string": [\n            {\n              "value1": "={{$json[\\"type\\"]}}",\n              "value2": "type1"\n            }\n          ]\n        },\n        "outputIndex": 0\n      }\n    ]\n  }\n}',
            'code': '{\n  "mode": "runOnceForAllItems",\n  "jsCode": "// Write your JavaScript code here\\nreturn items;"\n}',
            'wait': '{\n  "amount": 5,\n  "unit": "seconds"\n}',
            'merge': '{\n  "mode": "append",\n  "joinMode": "keepMatches"\n}',
            'split': '{\n  "batchSize": 10,\n  "options": {}\n}',
            'aws-s3-upload': '{\n  "operation": "upload",\n  "bucket": "my-bucket",\n  "name": "file.txt",\n  "binaryData": true\n}',
            'aws-lambda': '{\n  "functionName": "myFunction",\n  "payload": "{\\"key\\": \\"value\\"}"\n}',
            'github-create-issue': '{\n  "operation": "create",\n  "owner": "username",\n  "repository": "repo-name",\n  "title": "Issue Title",\n  "body": "Issue description"\n}',
            'stripe-payment': '{\n  "resource": "charge",\n  "operation": "create",\n  "amount": 1000,\n  "currency": "usd"\n}',
            'openai': '{\n  "model": "gpt-4",\n  "messages": [\n    {\n      "role": "user",\n      "content": "Hello!"\n    }\n  ]\n}',
            'google-drive-upload': '{\n  "operation": "upload",\n  "name": "document.pdf",\n  "binaryData": true\n}',
            'notion-create': '{\n  "resource": "page",\n  "operation": "create",\n  "databaseId": "database-id",\n  "title": "Page Title"\n}',
            'airtable-create': '{\n  "operation": "create",\n  "base": "base-id",\n  "table": "Table Name",\n  "fields": {\n    "Name": "John Doe"\n  }\n}',
            'hubspot-contact': '{\n  "resource": "contact",\n  "operation": "create",\n  "email": "contact@example.com",\n  "firstname": "John",\n  "lastname": "Doe"\n}',
            'shopify-order': '{\n  "resource": "order",\n  "operation": "getAll",\n  "returnAll": false,\n  "limit": 50\n}'
        };

        function loadParamTemplate() {
            const template = document.getElementById('paramTemplate').value;
            const params = paramTemplates[template] || '{}';
            document.getElementById('nodeParams').value = params;
        }

        function addNode() {
            const type = document.getElementById('nodeType').value;
            const name = document.getElementById('nodeName').value || 'Unnamed Node';
            const service = document.getElementById('nodeService').value || 'Generic';
            const paramsText = document.getElementById('nodeParams').value;

            if (!name || name === 'Select or enter custom...') {
                alert('Please select a node name');
                return;
            }

            if (!service || service === 'Select service...') {
                alert('Please select a service/integration');
                return;
            }

            let params;
            try {
                params = JSON.parse(paramsText);
            } catch (e) {
                alert('Invalid JSON in parameters field');
                return;
            }

            const node = {
                id: ++nodeCounter,
                name: name,
                type: type,
                service: service,
                parameters: params,
                position: [250 + (nodeCounter * 100), 250]
            };

            nodes.push(node);
            renderNodes();
            
            document.getElementById('nodeName').value = '';
            document.getElementById('nodeService').value = '';
            document.getElementById('nodeParams').value = '{}';
        }

        function removeNode(id) {
            nodes = nodes.filter(n => n.id !== id);
            renderNodes();
        }

        function renderNodes() {
            const container = document.getElementById('nodesContainer');
            
            if (nodes.length === 0) {
                container.innerHTML = '<p style="color: #999; padding: 8px; font-size: 0.9rem;">No nodes added yet</p>';
                return;
            }

            container.innerHTML = nodes.map(node => `
                <div class="node-item">
                    <div class="node-info">
                        <div class="node-name">${node.name}</div>
                        <div class="node-type">${node.service} (${node.type})</div>
                    </div>
                    <button class="btn btn-small" onclick="removeNode(${node.id})">Remove</button>
                </div>
            `).join('');
        }

        function generateWorkflow() {
            if (nodes.length === 0) {
                alert('Please add at least one node to the workflow');
                return;
            }

            const workflowName = document.getElementById('workflowName').value;
            const workflowDesc = document.getElementById('workflowDesc').value;

            const n8nNodes = nodes.map((node, index) => ({
                id: `node-${node.id}`,
                name: node.name,
                type: `n8n-nodes-base.${node.service}`,
                typeVersion: 1,
                position: node.position,
                parameters: node.parameters
            }));

            const connections = {};
            for (let i = 0; i < n8nNodes.length - 1; i++) {
                connections[n8nNodes[i].id] = {
                    main: [[{
                        node: n8nNodes[i + 1].id,
                        type: 'main',
                        index: 0
                    }]]
                };
            }

            const workflow = {
                name: workflowName,
                nodes: n8nNodes,
                connections: connections,
                active: false,
                settings: {},
                tags: []
            };

            if (workflowDesc) {
                workflow.description = workflowDesc;
            }

            const output = JSON.stringify(workflow, null, 2);
            document.getElementById('output').textContent = output;
        }

        function clearWorkflow() {
            if (confirm('Are you sure you want to clear all nodes?')) {
                nodes = [];
                nodeCounter = 0;
                renderNodes();
                document.getElementById('output').textContent = 'Add nodes and click "Generate n8n JSON" to see the workflow configuration.';
            }
        }

        function copyToClipboard() {
            const output = document.getElementById('output').textContent;
            
            if (output === 'Add nodes and click "Generate n8n JSON" to see the workflow configuration.') {
                alert('Please generate a workflow first');
                return;
            }

            navigator.clipboard.writeText(output).then(() => {
                alert('Workflow JSON copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy to clipboard');
            });
        }

        function copyParams() {
            const params = document.getElementById('nodeParams').value;
            
            if (!params || params === '{}') {
                alert('No parameters to copy');
                return;
            }

            navigator.clipboard.writeText(params).then(() => {
                alert('Parameters copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy to clipboard');
            });
        }

        function toggleTutorial() {
            const tutorial = document.getElementById('tutorial');
            tutorial.classList.toggle('hidden');
        }

        renderNodes();
    </script>
</body>
</html>